<!DOCTYPE html>
<html ng-app="mittens">
<head>
	<title>Mittens</title>
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript" src="angular.min.js"></script>
	<script type="text/javascript" src="angular-route.js"></script>
	<script type="text/javascript">
		var app = angular.module('mittens', ['ngRoute']);

		app.config(function($routeProvider,$locationProvider){
			$routeProvider.when
			('/',{
				templateUrl: 'home.html',
				controller: 'HomeController',
			})
			.when
			('/signup',{
				templateUrl: 'signup.html',
				controller: 'SignupController',
			});
		});

		app.controller('HomeController',function($scope, $http) {
			/*
			$scope.meows = ['CSK is back !',
			'Whistle podu @!',
			'IPL 2018, we are back !',
			'Chepauk, here we come xD',
			'CSKKKKK xD'];*/

			// $scope.newMeow = "What's up!"

			$scope.submitNewMeow = function(){
				/*
				console.log($scope.newMeow);*/
				$http.post('/meows',{newMeow: $scope.newMeow}).then(function(){
				//alert('success');
				getMeows(); 
				$scope.newMeow = '';
				});
			};

			$scope.removeMeow = function(meow){
			$http.put('/meows/remove',{meow:meow}).then(function(){
							getMeows(); 
							});
			};

			$scope.signin = function(){
				$http.put('/users/signin',{username: $scope.username,password:$scope.password}).then(function(){
						alert('Succesfully signed in');},function(err){
							alert('bad login credentials');
						});
			} // should it end here? update: may be not !
			
			function getMeows(){

			$http.get('/meows').then(function(response){
				//console.log(response.data);
				$scope.meows = response.data;
			});
		}
		getMeows();
		});


		/*
		var meows = [
			'CSK is back !',
			'Whistle podu @!',
			'IPL 2018, we are back !',
			'Chepauk, here we come xD'
	];*/
		// console.log($scope.meows);

		app.controller('SignupController',function($scope,$http){

			
			$scope.submitSignup = function(){
				var newUser = {
					username: $scope.username,
					password: $scope.password};
		$http.post('/users',newUser).then(function(){
				alert('success');
			});
			}

			console.log('This is the sign up page!');
		});
	</script>
</head>
<body>
	<h1 class="page-title"> <a href="#/">Mittens</a></h1>
	<div ng-view></div>
</body>
</html>
